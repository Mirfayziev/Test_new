{% extends "base.html" %}
{% block page_title %}Chat{% endblock %}
{% block content %}
<div class="container" style="max-width:900px;">
  <div class="card shadow-sm border-0 rounded-4">
    <div class="card-header bg-white fw-bold">
      {{ other.full_name }} bilan chat
    </div>

    <div class="card-body" style="height:480px; overflow:auto;">
      {% for m in messages %}
        <div class="mb-2 {% if m.sender_id==current_user.id %}text-end{% endif %}">
          <div class="d-inline-block px-3 py-2 rounded-3
               {% if m.sender_id==current_user.id %}bg-primary text-white{% else %}bg-light{% endif %}">
            {{ m.message }}
          </div>
          <div class="small text-muted mt-1">
            {{ m.created_at.strftime("%H:%M %d.%m.%Y") }}
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="card-footer bg-white">
      <form method="POST" class="d-flex gap-2">
        <input name="message" class="form-control" placeholder="Xabar yozing..." required>
        <button class="btn btn-primary rounded-pill">Yuborish</button>
      </form>
      <small class="text-muted">Sahifa yangilansa chat avtomatik yangilanadi.</small>
    </div>
  </div>
</div>
{% endblock %}
